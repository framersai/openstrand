# Backend Schema Reference

> Generated by `backend/scripts/generate_schema_docs.py`. Do not edit manually.

## `api`

### CheckoutRequest
| Field | Type | Default |
| --- | --- | --- |
| `plan_id` | `str` | `Required` |
| `success_url` | `Optional[str]` | `None` |
| `cancel_url` | `Optional[str]` | `None` |

### CheckoutResponse
| Field | Type | Default |
| --- | --- | --- |
| `checkout_url` | `str` | `Required` |

### SampleDatasetLoadRequest
Request payload for loading a bundled sample dataset.

| Field | Type | Default |
| --- | --- | --- |
| `filename` | `str` | `Required` |

## `api_openstrand`

### CapabilityResponse
| Field | Type | Default |
| --- | --- | --- |
| `analysisPipeline` | `bool` | `Required` |
| `documentAnalysis` | `bool` | `Required` |
| `mediaAnalysis` | `bool` | `Required` |
| `dynamicVisualizations` | `bool` | `Required` |
| `generativeVisualizations` | `bool` | `Required` |
| `topContent` | `bool` | `Required` |
| `aiArtisan` | `bool` | `Required` |
| `knowledgeGraph` | `bool` | `Required` |

## `models`

### CatalogEntry
| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Required` |
| `name` | `str` | `Required` |
| `description` | `Optional[str]` | `None` |
| `visibility` | `CatalogVisibility` | `Required` |
| `plan_required` | `PlanTier` | `Required` |
| `status` | `CatalogStatus` | `Required` |
| `storage_path` | `str` | `Required` |
| `schema_summary` | `Optional[Dict[str, Any]]` | `None` |
| `submitted_by` | `Optional[str]` | `None` |
| `approved_by` | `Optional[str]` | `None` |
| `created_at` | `Optional[str]` | `None` |
| `updated_at` | `Optional[str]` | `None` |
| `license` | `LicenseInfo` | `Field(default_factory=LicenseInfo)` |

### CatalogStatusUpdate
| Field | Type | Default |
| --- | --- | --- |
| `status` | `CatalogStatus` | `Required` |
| `note` | `Optional[str]` | `None` |

### CatalogSubmission
| Field | Type | Default |
| --- | --- | --- |
| `name` | `str` | `Required` |
| `description` | `Optional[str]` | `None` |
| `visibility` | `CatalogVisibility` | `CatalogVisibility.public` |
| `plan_required` | `PlanTier` | `PlanTier.FREE` |

### ColumnSummary
Summary statistics for a dataset column

| Field | Type | Default |
| --- | --- | --- |
| `name` | `str` | `Required` |
| `type` | `str` | `Required` |
| `sample_values` | `List[Any]` | `Required` |
| `stats` | `Dict[str, Any]` | `Required` |
| `semantic_tags` | `List[str]` | `Field(default_factory=list)` |

### ConfigResponse
Configuration response

| Field | Type | Default |
| --- | --- | --- |
| `providers_available` | `List[str]` | `Field(description='Available LLM providers')` |
| `default_provider` | `str` | `Field(description='Default LLM provider')` |
| `use_heuristics` | `bool` | `Field(description='Whether heuristics are enabled')` |
| `default_dataset_loaded` | `bool` | `Field(description='Whether default dataset is loaded')` |
| `max_upload_size_mb` | `int` | `Field(description='Maximum file upload size')` |

### CostRecord
Internal cost tracking record

| Field | Type | Default |
| --- | --- | --- |
| `provider` | `str` | `Required` |
| `model` | `str` | `Required` |
| `inputTokens` | `int` | `Required` |
| `outputTokens` | `int` | `Required` |
| `totalCost` | `float` | `Required` |
| `timestamp` | `str` | `Required` |
| `saved` | `bool` | `False` |

### CostStatistics
Cost tracking statistics

| Field | Type | Default |
| --- | --- | --- |
| `sessionTotal` | `float` | `Field(description='Total session cost')` |
| `byProvider` | `Dict[str, float]` | `Field(description='Cost breakdown by provider')` |
| `requestCount` | `int` | `Field(description='Number of requests')` |
| `averageCost` | `float` | `Field(description='Average cost per request')` |
| `costs` | `List[Dict[str, Any]]` | `Field(description='Recent cost records')` |

### DatasetInsightsResponse
Response payload for dataset auto insights

| Field | Type | Default |
| --- | --- | --- |
| `dataset_id` | `str` | `Required` |
| `generated_at` | `str` | `Required` |
| `summary` | `Optional[DatasetSummary]` | `None` |
| `insights` | `Dict[str, Any]` | `Required` |
| `debug` | `Optional[Dict[str, Any]]` | `None` |

### DatasetMetadata
Metadata about uploaded dataset

| Field | Type | Default |
| --- | --- | --- |
| `dataset_id` | `str` | `Field(description='Unique dataset ID')` |
| `row_count` | `int` | `Field(description='Number of rows in dataset')` |
| `columns` | `List[str]` | `Field(description='Column names')` |
| `column_types` | `Dict[str, str]` | `Field(description='Data type for each column')` |
| `preview` | `List[Dict[str, Any]]` | `Field(description='First 5 rows of data')` |
| `uploaded_at` | `str` | `Field(description='Upload timestamp')` |
| `filename` | `str` | `Field(description='Original filename')` |
| `intelligence_status` | `Optional[str]` | `Field(default=None, description='Schema intelligence analysis status')` |
| `intelligence_ready` | `bool` | `Field(default=False, description='Whether schema intelligence analysis has completed')` |
| `license` | `LicenseInfo` | `Field(default_factory=LicenseInfo)` |
| `language` | `str` | `Field(default='en', description='Primary ISO language code detected for the dataset')` |
| `available_languages` | `List[str]` | `Field(default_factory=list, description='List of locales with translated metadata')` |
| `translations` | `Dict[str, Any]` | `Field(default_factory=dict, description='Translated metadata blob keyed by locale')` |

### DatasetSummary
Dataset-wide summary containing column-level stats

| Field | Type | Default |
| --- | --- | --- |
| `dataset_id` | `str` | `Required` |
| `generated_at` | `str` | `Required` |
| `row_count` | `int` | `Required` |
| `column_count` | `int` | `Required` |
| `columns` | `List[ColumnSummary]` | `Required` |
| `notes` | `Optional[str]` | `None` |

### ErrorResponse
Error response

| Field | Type | Default |
| --- | --- | --- |
| `code` | `str` | `Field(description='Error code')` |
| `message` | `str` | `Field(description='Error message')` |
| `detail` | `Optional[Dict[str, Any]]` | `Field(None, description='Additional details')` |

### FeaturedDataset
| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Required` |
| `slug` | `str` | `Required` |
| `title` | `str` | `Required` |
| `summary` | `Optional[str]` | `None` |
| `dataset_id` | `Optional[str]` | `None` |
| `catalog_entry_id` | `Optional[str]` | `None` |
| `tags` | `List[str]` | `Field(default_factory=list)` |
| `status` | `FeaturedStatus` | `Required` |
| `featured_rank` | `Optional[int]` | `None` |
| `preview_rows` | `Optional[List[Dict[str, Any]]]` | `None` |
| `schema_summary` | `Optional[Dict[str, Any]]` | `None` |
| `cover_asset_url` | `Optional[str]` | `None` |
| `license` | `LicenseInfo` | `Field(default_factory=LicenseInfo)` |
| `submitted_by` | `Optional[str]` | `None` |
| `created_at` | `Optional[str]` | `None` |
| `updated_at` | `Optional[str]` | `None` |

### FeaturedDatasetSubmission
| Field | Type | Default |
| --- | --- | --- |
| `title` | `str` | `Required` |
| `summary` | `Optional[str]` | `None` |
| `dataset_id` | `Optional[str]` | `Field(default=None, description='Existing dataset id loaded in workspace')` |
| `catalog_entry_id` | `Optional[str]` | `Field(default=None, description='Supabase catalog entry id')` |
| `tags` | `List[str]` | `Field(default_factory=list)` |
| `license` | `Optional[LicenseInfo]` | `None` |

### FeaturedStatusUpdate
| Field | Type | Default |
| --- | --- | --- |
| `status` | `FeaturedStatus` | `Required` |

### FeaturedVisualization
| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Required` |
| `slug` | `str` | `Required` |
| `title` | `str` | `Required` |
| `summary` | `Optional[str]` | `None` |
| `dataset_id` | `str` | `Required` |
| `dataset_label` | `Optional[str]` | `None` |
| `tags` | `List[str]` | `Field(default_factory=list)` |
| `status` | `FeaturedStatus` | `Required` |
| `featured_rank` | `Optional[int]` | `None` |
| `visualization` | `Dict[str, Any]` | `Required` |
| `preview_rows` | `Optional[List[Dict[str, Any]]]` | `None` |
| `insight_summary` | `Optional[str]` | `None` |
| `preview_asset_url` | `Optional[str]` | `None` |
| `license` | `LicenseInfo` | `Field(default_factory=LicenseInfo)` |
| `submitted_by` | `Optional[str]` | `None` |
| `created_at` | `Optional[str]` | `None` |
| `updated_at` | `Optional[str]` | `None` |

### FeaturedVisualizationSubmission
| Field | Type | Default |
| --- | --- | --- |
| `title` | `str` | `Required` |
| `summary` | `Optional[str]` | `None` |
| `dataset_id` | `str` | `Field(description='Dataset id associated with the visualization')` |
| `visualization` | `Dict[str, Any]` | `Field(description='Full visualization payload to persist')` |
| `tags` | `List[str]` | `Field(default_factory=list)` |
| `insight_summary` | `Optional[str]` | `None` |
| `license` | `Optional[LicenseInfo]` | `None` |

### FeedbackLeaderboardEntry
| Field | Type | Default |
| --- | --- | --- |
| `target_id` | `str` | `Field(description='Dataset or visualization identifier')` |
| `dataset_id` | `Optional[str]` | `Field(default=None, description='Dataset grouping identifier')` |
| `label` | `Optional[str]` | `Field(default=None, description='Display label')` |
| `likes` | `int` | `Field(description='Total likes')` |
| `dislikes` | `int` | `Field(description='Total dislikes')` |
| `favorites` | `int` | `Field(description='Total favorites')` |
| `score` | `int` | `Field(description='Composite score used for sorting')` |

### FeedbackRequest
| Field | Type | Default |
| --- | --- | --- |
| `vote` | `Optional[FeedbackVote]` | `Field(default=None, description='Vote direction (up/down) or cleared when null')` |
| `favorite` | `Optional[bool]` | `Field(default=None, description='Whether this target is favorited')` |

### FeedbackSummary
| Field | Type | Default |
| --- | --- | --- |
| `target_id` | `str` | `Field(description='Dataset or visualization identifier')` |
| `dataset_id` | `Optional[str]` | `Field(default=None, description='Dataset grouping identifier')` |
| `likes` | `int` | `Field(description='Total thumbs up votes')` |
| `dislikes` | `int` | `Field(description='Total thumbs down votes')` |
| `favorites` | `int` | `Field(description='Total favorites')` |
| `score` | `int` | `Field(description='Composite score (likes - dislikes + favorites)')` |
| `user_vote` | `Optional[int]` | `Field(default=None, description="Current user's vote (1, -1, or 0)")` |
| `user_favorite` | `bool` | `Field(default=False, description='Whether current user favorited the target')` |

### HealthCheckResponse
Health check response

| Field | Type | Default |
| --- | --- | --- |
| `status` | `str` | `Field(description='Service status')` |
| `service` | `str` | `Field(description='Service name')` |
| `providers_available` | `List[str]` | `Field(description='Available LLM providers')` |
| `default_dataset_loaded` | `bool` | `Field(description='Whether default dataset is loaded')` |
| `version` | `str` | `Field(default='1.0.0', description='API version')` |

### LicenseInfo
Dataset or visualization license metadata.

| Field | Type | Default |
| --- | --- | --- |
| `name` | `Optional[str]` | `Field(default=None, description='License name (e.g., CC BY 4.0)')` |
| `url` | `Optional[str]` | `Field(default=None, description='Link to license details')` |

### ModifyVisualizationRequest
Request to modify existing visualization

| Field | Type | Default |
| --- | --- | --- |
| `visualization_id` | `str` | `Field(description='ID of visualization to modify')` |
| `prompt` | `str` | `Field(description='Modification instructions')` |

### PromptRequest
Request to process a natural language prompt

| Field | Type | Default |
| --- | --- | --- |
| `prompt` | `str` | `Field(description='Natural language query', min_length=1, max_length=1000)` |
| `dataset_id` | `Optional[str]` | `Field(None, description='Dataset to operate on')` |
| `provider` | `Optional[str]` | `Field(None, description='LLM provider to use')` |
| `use_heuristics` | `Optional[bool]` | `Field(None, description='Use pattern matching first')` |
| `target_tier` | `Optional[int]` | `Field(default=None, description='Preferred visualization tier (1=static, 2=dynamic, 3=ai_artisan)')` |
| `target_type` | `Optional[str]` | `Field(default=None, description='Preferred visualization type (e.g., force-graph, 3d-scatter, ai-artisan)')` |

### VisualizationConfig
Internal visualization configuration

| Field | Type | Default |
| --- | --- | --- |
| `type` | `str` | `Required` |
| `title` | `str` | `Required` |
| `columns` | `List[str]` | `Required` |
| `aggregation` | `Optional[str]` | `None` |
| `groupBy` | `Optional[str]` | `None` |
| `filterConditions` | `Optional[List[Dict[str, Any]]]` | `None` |
| `sortBy` | `Optional[Dict[str, str]]` | `None` |
| `insights` | `Optional[List[str]]` | `None` |
| `colorScheme` | `Optional[List[str]]` | `None` |
| `matched_by` | `Optional[str]` | `None` |
| `confidence` | `Optional[float]` | `None` |

### VisualizationResponse
Response containing generated visualization

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(description='Unique visualization ID')` |
| `type` | `str` | `Field(description='Visualization type')` |
| `title` | `str` | `Field(description='Chart title')` |
| `config` | `Dict[str, Any]` | `Field(description='Chart configuration')` |
| `data` | `Dict[str, Any]` | `Field(description='Processed data')` |
| `prompt` | `str` | `Field(description='Original prompt')` |
| `datasetId` | `Optional[str]` | `Field(default=None, description='Dataset identifier used for generation')` |
| `cost` | `Optional[Dict[str, Any]]` | `Field(None, description='LLM cost breakdown')` |
| `provider_used` | `Optional[str]` | `Field(None, description='Provider that generated this')` |
| `metadata` | `Dict[str, Any]` | `Field(default_factory=dict, description='Additional visualization metadata (tier, capabilities, etc.)')` |
| `createdAt` | `str` | `Field(description='Creation timestamp')` |
| `updatedAt` | `str` | `Field(description='Update timestamp')` |
| `insights` | `Optional[List[str]]` | `Field(None, description='Data insights')` |
| `debug` | `Optional[Dict[str, Any]]` | `Field(None, description='Debug information for prompt processing')` |

## `models.strand`

### AssessmentData
Assessment and exercise data

| Field | Type | Default |
| --- | --- | --- |
| `questions` | `List[Dict[str, Any]]` | `Field(default_factory=list)` |
| `answer_key` | `Optional[Dict[str, Any]]` | `Field(None, description='Answer key (protected)')` |
| `rubric` | `Optional[Dict[str, Any]]` | `Field(None, description='Grading rubric')` |
| `auto_grade` | `bool` | `Field(False, description='Can be automatically graded?')` |
| `attempts_allowed` | `int` | `Field(-1, description='Max attempts (-1 = unlimited)')` |

### DocumentAnalysis
Automated analysis metadata for textual documents and PDFs

| Field | Type | Default |
| --- | --- | --- |
| `status` | `AnalysisStatus` | `Field(AnalysisStatus.NOT_STARTED, description='Processing status')` |
| `provider` | `Optional[str]` | `Field(None, description="Last provider or pipeline used (e.g., 'whisper')")` |
| `pages` | `List[DocumentPageSummary]` | `Field(default_factory=list, description='Per-page summaries')` |
| `outline` | `List[str]` | `Field(default_factory=list, description='Top-level outline headings')` |
| `detected_languages` | `List[str]` | `Field(default_factory=list, description='Languages detected during analysis')` |
| `entities` | `List[Dict[str, Any]]` | `Field(default_factory=list, description='Entity extraction results')` |
| `embeddings_generated` | `bool` | `Field(False, description='Whether embeddings were produced for the document')` |
| `last_analyzed_at` | `Optional[datetime]` | `Field(None, description='Timestamp of most recent successful analysis')` |

### DocumentPageSummary
Summary artifacts generated per document page

| Field | Type | Default |
| --- | --- | --- |
| `page_number` | `int` | `Field(..., ge=1, description='1-based page index')` |
| `summary` | `Optional[str]` | `Field(None, description='Natural language summary for the page')` |
| `keywords` | `List[str]` | `Field(default_factory=list, description='Key concepts detected on the page')` |
| `thumbnail_url` | `Optional[str]` | `Field(None, description='Preview image for the page, if rendered')` |

### LearningObjective
Structured learning objective

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(default_factory=lambda: str(uuid4()))` |
| `objective` | `str` | `Field(..., description='Learning objective statement')` |
| `bloom_level` | `str` | `Field('understand', description="Bloom's taxonomy level", pattern='^(remember|understand|apply|analyze|evaluate|create)$')` |
| `measurable` | `bool` | `Field(True, description='Is this objective measurable?')` |

### MediaAnalysis
Automated analysis metadata for audio/video files

| Field | Type | Default |
| --- | --- | --- |
| `status` | `AnalysisStatus` | `Field(AnalysisStatus.NOT_STARTED, description='Processing status')` |
| `provider` | `Optional[str]` | `Field(None, description="Last provider or pipeline used (e.g., 'aws-transcribe')")` |
| `transcript_text` | `Optional[str]` | `Field(None, description='Inline transcript (if generated)')` |
| `transcript_url` | `Optional[str]` | `Field(None, description='Reference to hosted transcript file')` |
| `scenes` | `List[MediaScene]` | `Field(default_factory=list, description='Detected scenes/segments')` |
| `keyframes` | `List[MediaKeyframe]` | `Field(default_factory=list, description='Notable frames with descriptions')` |
| `audio_waveform_url` | `Optional[str]` | `Field(None, description='Optional waveform visualization asset')` |
| `detected_objects` | `List[str]` | `Field(default_factory=list, description='Recognized objects/entities')` |
| `last_analyzed_at` | `Optional[datetime]` | `Field(None, description='Timestamp of most recent successful analysis')` |

### MediaContent
Media content metadata

| Field | Type | Default |
| --- | --- | --- |
| `url` | `str` | `Field(..., description='Media URL or path')` |
| `type` | `str` | `Field(..., description='Media MIME type')` |
| `size` | `Optional[int]` | `Field(None, description='File size in bytes')` |
| `duration` | `Optional[float]` | `Field(None, description='Duration in seconds (audio/video)')` |
| `dimensions` | `Optional[Dict[str, int]]` | `Field(None, description='Width/height for images')` |
| `thumbnail` | `Optional[str]` | `Field(None, description='Thumbnail URL')` |
| `transcript` | `Optional[str]` | `Field(None, description='Transcript for audio/video')` |
| `alt_text` | `Optional[str]` | `Field(None, description='Alternative text for accessibility')` |

### MediaKeyframe
Keyframe summary for media content

| Field | Type | Default |
| --- | --- | --- |
| `timestamp` | `float` | `Field(..., ge=0.0, description='Seconds from start of media')` |
| `description` | `Optional[str]` | `Field(None, description='Narrative summary for the frame')` |
| `thumbnail_url` | `Optional[str]` | `Field(None, description='Frame preview image')` |

### MediaScene
Scene-level segmentation metadata for media

| Field | Type | Default |
| --- | --- | --- |
| `start_time` | `float` | `Field(..., ge=0.0, description='Scene start in seconds')` |
| `end_time` | `float` | `Field(..., ge=0.0, description='Scene end in seconds')` |
| `summary` | `Optional[str]` | `Field(None, description='What happens during this scene')` |
| `tags` | `List[str]` | `Field(default_factory=list, description='Scene classification tags')` |

### Pattern
Edition specification for generating outputs

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(default_factory=lambda: str(uuid4()))` |
| `name` | `str` | `Field(..., description='Pattern name')` |
| `description` | `str` | `Field(..., description='Pattern description')` |
| `selection` | `Dict[str, Any]` | `Field(..., description='Criteria for selecting strands')` |
| `ordering` | `str` | `Field('topological', pattern='^(topological|difficulty|explicit|chronological)$')` |
| `decoration` | `Dict[str, Any]` | `Field(default_factory=lambda: {'include_intro': True, 'include_outro': True, 'generate_bridges': True, 'toc_levels': 2})` |
| `editions` | `List[str]` | `Field(default=['web', 'pdf'], description='Output formats to generate')` |
| `validation` | `Dict[str, Any]` | `Field(default_factory=dict)` |
| `created` | `datetime` | `Field(default_factory=datetime.utcnow)` |
| `modified` | `datetime` | `Field(default_factory=datetime.utcnow)` |

### Prerequisite
Prerequisite relationship with level

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(..., description='Strand ID of the prerequisite')` |
| `level` | `PrerequisiteLevel` | `Field(PrerequisiteLevel.UNDERSTANDING, description='Level of prerequisite knowledge required')` |
| `title` | `Optional[str]` | `Field(None, description='Title for display')` |
| `reason` | `Optional[str]` | `Field(None, description='Why this is a prerequisite')` |

### QualityMatrix
Aggregated quality signals for a strand

| Field | Type | Default |
| --- | --- | --- |
| `llm_rating` | `Optional[int]` | `Field(None, ge=1, le=5, description='Automated quality rating produced by an LLM (1-5 scale)')` |
| `human_ratings` | `Dict[int, int]` | `Field(default_factory=dict, description='Count of human ratings keyed by rating value (1-5)')` |
| `composite_score` | `Optional[float]` | `Field(None, ge=0.0, le=5.0, description='Weighted composite score combining LLM and human signals')` |
| `confidence` | `Optional[float]` | `Field(None, ge=0.0, le=1.0, description='Confidence score for the composite rating')` |
| `last_updated` | `Optional[datetime]` | `Field(None, description='Timestamp of the most recent quality update')` |

### Relationship
Relationship to another strand

| Field | Type | Default |
| --- | --- | --- |
| `target_id` | `str` | `Field(..., description='Target strand ID')` |
| `type` | `RelationshipType` | `Field(..., description='Type of relationship')` |
| `weight` | `float` | `Field(1.0, ge=0.0, le=1.0, description='Relationship strength')` |
| `description` | `Optional[str]` | `Field(None, description='Relationship description')` |
| `metadata` | `Optional[Dict[str, Any]]` | `Field(default_factory=dict)` |

### RepresentationalVariant
Content variant for different representation modes

| Field | Type | Default |
| --- | --- | --- |
| `mode` | `RepresentationMode` | `Field(..., description='Representation mode')` |
| `content` | `Dict[str, Any]` | `Field(..., description='Content for this mode')` |
| `media_type` | `Optional[str]` | `Field(None, description='Media type if applicable')` |

### ScaffoldVariant
Scaffold variant for different support levels

| Field | Type | Default |
| --- | --- | --- |
| `level` | `ScaffoldLevel` | `Field(..., description='Scaffolding level')` |
| `content` | `Dict[str, Any]` | `Field(..., description='Content for this variant')` |
| `hints` | `List[str]` | `Field(default_factory=list, description='Hints for this level')` |
| `examples` | `List[Dict[str, Any]]` | `Field(default_factory=list)` |

### SpiralMetadata
Spiral curriculum metadata

| Field | Type | Default |
| --- | --- | --- |
| `stage` | `int` | `Field(1, ge=1, le=4, description='Spiral stage (1-4)')` |
| `revisit_windows` | `List[int]` | `Field(default=[3, 14, 30], description='Suggested revisit intervals in days')` |
| `interleave_with` | `List[str]` | `Field(default_factory=list, description='Strand IDs to interleave during revisits')` |
| `mastery_threshold` | `float` | `Field(0.8, ge=0.0, le=1.0, description='Mastery level required to progress')` |
| `estimated_time` | `int` | `Field(10, ge=1, description='Estimated completion time in minutes')` |

### Strand
Polymorphic content model for OpenStrand
Represents any type of content in the knowledge management system

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(default_factory=lambda: str(uuid4()), description='Unique identifier')` |
| `type` | `StrandType` | `Field(..., description='Content type')` |
| `title` | `str` | `Field(..., description='Content title')` |
| `slug` | `str` | `Field(..., description='URL-friendly slug')` |
| `summary` | `str` | `Field(..., description='Brief summary')` |
| `created` | `datetime` | `Field(default_factory=datetime.utcnow)` |
| `modified` | `datetime` | `Field(default_factory=datetime.utcnow)` |
| `difficulty` | `Optional[Difficulty]` | `Field(None, description='Content difficulty')` |
| `learning_objectives` | `List[Union[str, LearningObjective]]` | `Field(default_factory=list, description='Learning objectives')` |
| `prerequisites` | `List[Prerequisite]` | `Field(default_factory=list, description='Prerequisites with levels')` |
| `spiral_metadata` | `Optional[SpiralMetadata]` | `Field(None)` |
| `scaffold_variants` | `List[ScaffoldVariant]` | `Field(default_factory=list, description='Different scaffolding levels')` |
| `representational_variants` | `List[RepresentationalVariant]` | `Field(default_factory=list, description='Different representation modes')` |
| `viz_config` | `Optional[VisualizationConfig]` | `Field(None)` |
| `assessment_data` | `Optional[AssessmentData]` | `Field(None)` |
| `content` | `StrandContent` | `Field(default_factory=StrandContent)` |
| `metadata` | `StrandMetadata` | `Field(default_factory=StrandMetadata)` |
| `relationships` | `List[Relationship]` | `Field(default_factory=list, description='Relationships to other strands')` |
| `analysis_status` | `AnalysisStatus` | `Field(AnalysisStatus.NOT_STARTED, description='Current automated analysis status for this strand')` |
| `analysis_provider` | `Optional[str]` | `Field(None, description='Identifier for the last analysis provider or pipeline')` |
| `document_analysis` | `Optional[DocumentAnalysis]` | `Field(None, description='Structured analysis data for document/PDF strands')` |
| `media_analysis` | `Optional[MediaAnalysis]` | `Field(None, description='Structured analysis data for media (audio/video) strands')` |
| `analysis_notes` | `List[str]` | `Field(default_factory=list, description='Human or system notes related to analysis attempts')` |
| `derivatives` | `List[str]` | `Field(default_factory=list, description='Generated derivative asset identifiers (thumbnails, previews, visualizations)')` |
| `visibility` | `str` | `Field('private', pattern='^(public|private|unlisted|premium)$')` |
| `owner_id` | `Optional[str]` | `Field(None, description='Owner user ID')` |
| `permissions` | `List[StrandPermission]` | `Field(default_factory=list, description='Explicit access control entries')` |
| `shared_with` | `List[str]` | `Field(default_factory=list, description='Legacy shared user IDs (use permissions instead)')` |
| `quality` | `QualityMatrix` | `Field(default_factory=QualityMatrix, description='Aggregated quality ratings and confidence')` |
| `views` | `int` | `Field(0, ge=0, description='View count')` |
| `likes` | `int` | `Field(0, ge=0, description='Like count')` |
| `completion_rate` | `float` | `Field(0.0, ge=0.0, le=1.0, description='Average completion rate')` |

### StrandContent
Polymorphic content storage

| Field | Type | Default |
| --- | --- | --- |
| `markdown` | `Optional[str]` | `Field(None, description='Markdown content')` |
| `html` | `Optional[str]` | `Field(None, description='Rendered HTML')` |
| `data` | `Optional[Any]` | `Field(None, description='Dataset content (CSV/JSON)')` |
| `media` | `Optional[MediaContent]` | `Field(None, description='Media content')` |
| `code` | `Optional[Dict[str, str]]` | `Field(None, description='Code snippets by language')` |
| `metadata` | `Dict[str, Any]` | `Field(default_factory=dict, description='Additional metadata')` |

### StrandMetadata
Educational and organizational metadata

| Field | Type | Default |
| --- | --- | --- |
| `author` | `Optional[str]` | `Field(None, description='Content author')` |
| `source` | `Optional[str]` | `Field(None, description='Original source')` |
| `license` | `Optional[str]` | `Field(None, description='Content license')` |
| `language` | `str` | `Field('en', description='Content language (ISO 639-1)')` |
| `tags` | `List[str]` | `Field(default_factory=list, description='Content tags')` |
| `keywords` | `List[str]` | `Field(default_factory=list, description='Search keywords')` |
| `concepts` | `List[str]` | `Field(default_factory=list, description='Key concepts covered')` |
| `version` | `str` | `Field('1.0.0', description='Content version')` |
| `citations` | `List[str]` | `Field(default_factory=list, description='Research citations')` |

### StrandPermission
Access control entry for a strand

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(default_factory=lambda: str(uuid4()), description='Permission entry ID')` |
| `principal_id` | `str` | `Field(..., description='Identifier for the principal (user/team/link)')` |
| `principal_type` | `PrincipalType` | `Field(PrincipalType.USER, description='Principal type')` |
| `role` | `AccessRole` | `Field(AccessRole.VIEWER, description='Access level granted')` |
| `granted_by` | `Optional[str]` | `Field(None, description='User ID who granted access')` |
| `granted_at` | `datetime` | `Field(default_factory=datetime.utcnow)` |
| `expires_at` | `Optional[datetime]` | `Field(None, description='Optional expiration timestamp')` |
| `share_token` | `Optional[str]` | `Field(None, description='Opaque token for link-based access (only when principal_type=link)')` |

### Thread
Ordered sequence of strands (chapter/unit)

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(default_factory=lambda: str(uuid4()))` |
| `title` | `str` | `Field(..., description='Thread title')` |
| `slug` | `str` | `Field(..., description='URL-friendly slug')` |
| `description` | `str` | `Field(..., description='Thread description')` |
| `strand_order` | `List[str]` | `Field(..., description='Ordered list of strand IDs')` |
| `intro` | `Optional[str]` | `Field(None, description='Introduction text')` |
| `outro` | `Optional[str]` | `Field(None, description='Conclusion text')` |
| `metadata` | `StrandMetadata` | `Field(default_factory=StrandMetadata)` |
| `created` | `datetime` | `Field(default_factory=datetime.utcnow)` |
| `modified` | `datetime` | `Field(default_factory=datetime.utcnow)` |
| `nav_level` | `str` | `Field('chapter', pattern='^(part|chapter|section|lesson)$')` |
| `include_in_toc` | `bool` | `Field(True, description='Include in table of contents')` |

### VisualizationConfig
Configuration for visualization strands

| Field | Type | Default |
| --- | --- | --- |
| `type` | `str` | `Field(..., description='Visualization type (chart, d3, three, artisan)')` |
| `spec` | `Dict[str, Any]` | `Field(..., description='Visualization specification')` |
| `data_source` | `Optional[str]` | `Field(None, description='Reference to dataset strand')` |
| `interactive` | `bool` | `Field(True, description='Is the visualization interactive?')` |
| `remixable` | `bool` | `Field(False, description='Can users remix this visualization?')` |
| `kind` | `VisualizationKind` | `Field(VisualizationKind.DATASET, description='High-level visualization category')` |
| `prompt` | `Optional[str]` | `Field(None, description='Generation prompt or narrative instructions')` |
| `style_preset` | `Optional[str]` | `Field(None, description='Named style/theme used for generation')` |
| `provider` | `Optional[str]` | `Field(None, description='Generator or renderer provider identifier')` |
| `source_strand_id` | `Optional[str]` | `Field(None, description='Strand that this visualization was derived from (document/media, etc.)')` |

### Weave
Knowledge graph for a domain

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(default_factory=lambda: str(uuid4()))` |
| `name` | `str` | `Field(..., description='Weave name')` |
| `domain` | `str` | `Field(..., description='Knowledge domain')` |
| `nodes` | `List[WeaveNode]` | `Field(default_factory=list)` |
| `edges` | `List[WeaveEdge]` | `Field(default_factory=list)` |
| `metrics` | `Optional[Dict[str, Any]]` | `Field(None, description='Graph metrics')` |
| `communities` | `Optional[List[List[str]]]` | `Field(None, description='Detected communities')` |
| `created` | `datetime` | `Field(default_factory=datetime.utcnow)` |
| `modified` | `datetime` | `Field(default_factory=datetime.utcnow)` |

### WeaveEdge
Edge in the knowledge graph

| Field | Type | Default |
| --- | --- | --- |
| `source` | `str` | `Field(..., description='Source node ID')` |
| `target` | `str` | `Field(..., description='Target node ID')` |
| `type` | `str` | `Field(..., description='Relationship type')` |
| `weight` | `float` | `Field(1.0, ge=0.0, le=1.0, description='Edge weight')` |
| `metadata` | `Dict[str, Any]` | `Field(default_factory=dict)` |

### WeaveNode
Node in the knowledge graph

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(..., description='Node ID (strand or concept)')` |
| `type` | `str` | `Field(..., description='Node type')` |
| `title` | `str` | `Field(..., description='Node title')` |
| `importance` | `float` | `Field(1.0, ge=0.0, description='Node importance/centrality')` |
| `metadata` | `Dict[str, Any]` | `Field(default_factory=dict)` |

## `services.ai.openstrand_ai`

### AIArtisanPrompt
Prompt for AI Artisan visualization generation

| Field | Type | Default |
| --- | --- | --- |
| `data` | `Any` | `Required` |
| `visualization_type` | `str` | `Required` |
| `style` | `str` | `Required` |
| `context` | `str` | `Required` |
| `target_audience` | `str` | `Required` |
| `color_scheme` | `Optional[str]` | `'auto'` |
| `interactive` | `bool` | `True` |
| `accessibility_notes` | `Optional[str]` | `None` |

### AIArtisanResult
Result from AI Artisan visualization generation

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(default_factory=lambda: str(uuid4()))` |
| `visualization_spec` | `Dict[str, Any]` | `Required` |
| `type` | `str` | `Required` |
| `title` | `str` | `Required` |
| `description` | `str` | `Required` |
| `insights` | `List[str]` | `Required` |
| `educational_notes` | `str` | `Required` |
| `generation_time` | `datetime` | `Field(default_factory=datetime.utcnow)` |
| `tokens_used` | `int` | `0` |

### ContentEnhancement
Enhancement suggestions for content

| Field | Type | Default |
| --- | --- | --- |
| `strand_id` | `str` | `Required` |
| `suggestions` | `List[str]` | `Required` |
| `learning_objectives` | `List[LearningObjective]` | `Required` |
| `prerequisites` | `List[str]` | `Required` |
| `related_concepts` | `List[str]` | `Required` |
| `difficulty_analysis` | `Dict[str, Any]` | `Required` |
| `estimated_reading_time` | `int` | `Required` |
| `key_takeaways` | `List[str]` | `Required` |

### ScaffoldGeneration
Generated scaffolding variants

| Field | Type | Default |
| --- | --- | --- |
| `strand_id` | `str` | `Required` |
| `variants` | `List[ScaffoldVariant]` | `Required` |
| `adaptation_strategy` | `str` | `Required` |
| `progression_criteria` | `Dict[str, Any]` | `Required` |

## `services.spiral_scheduler`

### DailySchedule
Daily learning schedule

| Field | Type | Default |
| --- | --- | --- |
| `date` | `datetime` | `Required` |
| `user_id` | `str` | `Required` |
| `items` | `List[ScheduleItem]` | `Required` |
| `total_duration` | `int` | `Required` |
| `review_items` | `List[ScheduleItem]` | `Required` |
| `new_items` | `List[ScheduleItem]` | `Required` |
| `practice_items` | `List[ScheduleItem]` | `Required` |

### LearningProgress
User's learning progress for a strand

| Field | Type | Default |
| --- | --- | --- |
| `user_id` | `str` | `Required` |
| `strand_id` | `str` | `Required` |
| `phase` | `LearningPhase` | `Required` |
| `mastery_level` | `float` | `Required` |
| `total_time_spent` | `int` | `Required` |
| `review_count` | `int` | `Required` |
| `last_accessed` | `datetime` | `Required` |
| `sm2_item` | `Optional[Dict[str, Any]]` | `None` |
| `scaffold_level` | `str` | `'guided'` |

### ScheduleItem
Individual item in learning schedule

| Field | Type | Default |
| --- | --- | --- |
| `id` | `str` | `Field(default_factory=lambda: str(uuid4()))` |
| `strand_id` | `str` | `Required` |
| `user_id` | `str` | `Required` |
| `scheduled_for` | `datetime` | `Required` |
| `status` | `ScheduleItemStatus` | `ScheduleItemStatus.SCHEDULED` |
| `phase` | `LearningPhase` | `Required` |
| `estimated_duration` | `int` | `Required` |
| `actual_duration` | `Optional[int]` | `None` |
| `quality` | `Optional[ResponseQuality]` | `None` |
| `notes` | `Optional[str]` | `None` |
| `completed_at` | `Optional[datetime]` | `None` |
| `sm2_data` | `Optional[Dict[str, Any]]` | `None` |

## `services.visualization.ai_artisan_generator`

### AIArtisanRequest
Payload describing an AI Artisan generation request.

| Field | Type | Default |
| --- | --- | --- |
| `prompt` | `str` | `Required` |
| `data_summary` | `Dict[str, Any]` | `Required` |
| `aesthetic_mode` | `Optional[str]` | `'auto'` |
| `animation_level` | `Optional[str]` | `'moderate'` |
| `model` | `Optional[str]` | `'claude-opus-4.1'` |

### AIArtisanResponse
Response payload returned to the caller after generation.

| Field | Type | Default |
| --- | --- | --- |
| `code` | `Dict[str, str]` | `Required` |
| `sandbox_config` | `Dict[str, Any]` | `Required` |
| `cost` | `float` | `Required` |
| `generation_time_ms` | `int` | `Required` |
| `model_used` | `str` | `Required` |
| `can_edit` | `bool` | `True` |
| `can_remix` | `bool` | `True` |

## `services.visualization.tier_classifier`

### TierClassification
| Field | Type | Default |
| --- | --- | --- |
| `tier` | `int` | `Required` |
| `confidence` | `float` | `Required` |
| `reasoning` | `str` | `Required` |
| `suggested_approach` | `str` | `Required` |
| `estimated_cost` | `float` | `Required` |
| `available_types` | `List[str]` | `Required` |

## `services.weave_service`

### CentralityResult
Centrality metrics for nodes

| Field | Type | Default |
| --- | --- | --- |
| `degree` | `Dict[str, float]` | `Required` |
| `betweenness` | `Dict[str, float]` | `Required` |
| `closeness` | `Dict[str, float]` | `Required` |
| `eigenvector` | `Dict[str, float]` | `Required` |
| `pagerank` | `Dict[str, float]` | `Required` |

### CommunityResult
Result of community detection

| Field | Type | Default |
| --- | --- | --- |
| `communities` | `List[List[str]]` | `Required` |
| `modularity` | `float` | `Required` |
| `num_communities` | `int` | `Required` |

### GraphMetrics
Overall graph metrics

| Field | Type | Default |
| --- | --- | --- |
| `num_nodes` | `int` | `Required` |
| `num_edges` | `int` | `Required` |
| `density` | `float` | `Required` |
| `diameter` | `Optional[int]` | `Required` |
| `average_clustering` | `float` | `Required` |
| `average_degree` | `float` | `Required` |
| `connected_components` | `int` | `Required` |
| `is_connected` | `bool` | `Required` |
| `assortativity` | `Optional[float]` | `Required` |

### PathResult
Result of a path-finding operation

| Field | Type | Default |
| --- | --- | --- |
| `path` | `List[str]` | `Required` |
| `length` | `int` | `Required` |
| `weight` | `float` | `Required` |
| `edges` | `List[WeaveEdge]` | `Required` |
